"use strict";(()=>{async function w(e){let n=`https://gravatar.helpers.wipn.org/?email=${encodeURIComponent(e)}`;document.querySelectorAll('[data-element="gravatar"]').forEach(r=>{r.src=n})}async function p(e){return`https://gravatar.helpers.wipn.org/?email=${encodeURIComponent(e)}`}document.addEventListener("DOMContentLoaded",function(){window.$memberstackDom.getCurrentMember().then(({data:e})=>{e&&e.auth.email&&w(e.auth.email)})});function M(e='[data-element="copyright"]'){let t=new Date().getFullYear(),n=document.querySelector(e);n&&(n.textContent=t.toString())}document.addEventListener("DOMContentLoaded",function(){M()});(function(){document.addEventListener("DOMContentLoaded",function(){let e=localStorage.getItem("_ms-mem"),t=e?JSON.parse(e):{};document.querySelectorAll("[ms-code-customfield]").forEach(a=>{let r=a.getAttribute("ms-code-customfield");if(r)if(r.startsWith("!")){let c=r.slice(1);t.customFields&&t.customFields[c]&&a.parentNode?.removeChild(a)}else(!t.customFields||!t.customFields[r])&&a.parentNode?.removeChild(a)})})})();async function f(e){try{let t="https://members.helpers.wipn.org/";return t+=e||"",await(await fetch(t)).json()}catch(t){return t}}function y(){window.fsAttributes=window.fsAttributes||[],window.fsAttributes.push(["cmsfilter",async e=>{let[t]=e;if(!t)return;let{listInstance:n}=t,[a]=n.items,r=a.element,c=await f();n.clearItems();let i=c.map(s=>C(s,r)),l=await Promise.all(i);n.addItems(l);let o=t.form.querySelector('[data-element="members-filter"]');!o||!o.parentElement||o.remove()}])}async function C(e,t){let n=t.cloneNode(!0),a=n.querySelector('[data-element="first-name"]'),r=n.querySelector('[data-element="last-name"]'),c=n.querySelector('[data-element="chapter"]'),i=n.querySelector('[data-element="company"]'),l=n.querySelector('[data-element="location"]'),o=n.querySelector('[data-element="phone"]'),m=n.querySelector('[data-element="profile-image"]');return a&&(a.textContent=e.firstName),r&&(r.textContent=e.lastName),c&&(c.textContent="National Virtual",e.chapter&&(c.textContent=e.chapter)),i&&(i.style.display="none",e.company&&(i.textContent=e.company,i.style.display="block")),l&&(l.style.display="none",e.location&&(l.textContent=e.location,l.style.display="block")),o&&(o.style.display="none",e.phone&&(o.textContent=e.phone,o.style.display="block")),m&&(m.src=await p(e.email)),n}function E(e){let t=new Date(e*1e3),n={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",n)}function g(e,t='[data-element="plan-price"]',n='[data-element="plan-renewal"]',a='[data-element="plan-status"]'){let i=e.planConnections.filter(s=>(s.active||s.status==="TRIALING")&&s.payment&&s.payment.nextBillingDate).sort((s,d)=>s===void 0||d===void 0?0:s.payment!==void 0&&d.payment!==void 0?d.payment.nextBillingDate-s.payment.nextBillingDate:0)[0],l=document.querySelector(t),o=document.querySelector(n),m=document.querySelector(a);if(i&&i.payment){if(l&&(l.textContent=`$${i.payment.amount}`),o){let s=E(i.payment.nextBillingDate);o.textContent=s}m&&(m.textContent=i.active?"Active":"Inactive")}else l&&(l.textContent="Free"),o&&(o.textContent="N/A")}window.membersFilters=y||[];var h=window.$memberstackDom;if(h)h.getCurrentMember().then(({data:e})=>{e&&g(e)});else throw new Error("MemberStack is not available.");window.fsAttributes=window.fsAttributes||[];var b=window.location.search,u=new URLSearchParams(b);u.has("action")&&document.querySelectorAll("[data-action]").forEach(t=>{t.getAttribute("data-action")===u.get("action")?t.style.display="block":t.getAttribute("data-action")===`!${u.get("action")}`&&(t.style.display="none")});})();
