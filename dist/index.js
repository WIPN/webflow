"use strict";(()=>{async function p(e){let t=`https://gravatar.helpers.wipn.org/?email=${encodeURIComponent(e)}`;document.querySelectorAll('[data-element="gravatar"]').forEach(r=>{r.src=t})}document.addEventListener("DOMContentLoaded",function(){window.$memberstackDom.getCurrentMember().then(({data:e})=>{e&&e.auth.email&&p(e.auth.email)})});function f(e='[data-element="copyright"]'){let n=new Date().getFullYear(),t=document.querySelector(e);t&&(t.textContent=n.toString())}document.addEventListener("DOMContentLoaded",function(){f()});(function(){document.addEventListener("DOMContentLoaded",function(){let e=localStorage.getItem("_ms-mem"),n=e?JSON.parse(e):{};document.querySelectorAll("[ms-code-customfield]").forEach(o=>{let r=o.getAttribute("ms-code-customfield");if(r)if(r.startsWith("!")){let a=r.slice(1);n.customFields&&n.customFields[a]&&o.parentNode?.removeChild(o)}else(!n.customFields||!n.customFields[r])&&o.parentNode?.removeChild(o)})})})();async function l(e){try{return await(await fetch(`https://members.helpers.wipn.org/${e}`)).json()}catch(n){return n}}function d(e){let n=new Date(e*1e3),t={year:"numeric",month:"long",day:"numeric"};return n.toLocaleDateString("en-US",t)}function u(e,n='[data-element="plan-price"]',t='[data-element="plan-renewal"]'){let a=e.planConnections.filter(i=>(i.active||i.status==="TRIALING")&&i.payment&&i.payment.nextBillingDate).sort((i,c)=>c.payment.nextBillingDate-i.payment.nextBillingDate)[0];console.log("current",a),console.log("date",d(a.payment.nextBillingDate));let s=document.querySelector(n),m=document.querySelector(t);if(a&&a.payment){if(s&&(s.textContent=`$${a.payment.amount}`),m){let i=d(a.payment.nextBillingDate);m.textContent=i}}else s&&(s.textContent="Free"),m&&(m.textContent="N/A")}var g=window.$memberstackDom;document.addEventListener("DOMContentLoaded",function(){g.getCurrentMember().then(({data:e})=>{u(e)})});window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async e=>{let[n]=e,{listInstance:t}=n,[o]=t.items,r=o.element,a=await l();t.clearItems();let s=a.map(c=>y(c,r));await t.addItems(s);let m=n.form.querySelector('[data-element="filter"]');!m||!m.parentElement||m.remove()}]);var y=(e,n)=>{let t=n.cloneNode(!0),o=t.querySelector('[data-element="first-name"]'),r=t.querySelector('[data-element="last-name"]'),a=t.querySelector('[data-element="chapter"]'),s=t.querySelector('[data-element="company"]');return o&&(o.textContent=e.firstName),r&&(r.textContent=e.lastName),a&&(a.textContent="National Virtual",e.chapter&&(a.textContent=e.chapter)),s&&(e.company?s.textContent=e.company:s.style.display="none"),t};})();
