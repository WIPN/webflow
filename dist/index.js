"use strict";(()=>{async function f(e){let n=`https://gravatar.helpers.wipn.org/?email=${encodeURIComponent(e)}`;document.querySelectorAll('[data-element="gravatar"]').forEach(r=>{r.src=n})}document.addEventListener("DOMContentLoaded",function(){window.$memberstackDom.getCurrentMember().then(({data:e})=>{e&&e.auth.email&&f(e.auth.email)})});function y(e='[data-element="copyright"]'){let t=new Date().getFullYear(),n=document.querySelector(e);n&&(n.textContent=t.toString())}document.addEventListener("DOMContentLoaded",function(){y()});(function(){document.addEventListener("DOMContentLoaded",function(){let e=localStorage.getItem("_ms-mem"),t=e?JSON.parse(e):{};document.querySelectorAll("[ms-code-customfield]").forEach(a=>{let r=a.getAttribute("ms-code-customfield");if(r)if(r.startsWith("!")){let i=r.slice(1);t.customFields&&t.customFields[i]&&a.parentNode?.removeChild(a)}else(!t.customFields||!t.customFields[r])&&a.parentNode?.removeChild(a)})})})();async function u(e){try{return await(await fetch(`https://members.helpers.wipn.org/${e}`)).json()}catch(t){return t}}function g(e){let t=new Date(e*1e3),n={year:"numeric",month:"long",day:"numeric"};return t.toLocaleDateString("en-US",n)}function p(e,t='[data-element="plan-price"]',n='[data-element="plan-renewal"]',a='[data-element="plan-status"]'){let o=e.planConnections.filter(s=>(s.active||s.status==="TRIALING")&&s.payment&&s.payment.nextBillingDate).sort((s,d)=>s===void 0||d===void 0?0:s.payment!==void 0||d.payment!==void 0?d.payment.nextBillingDate-s.payment.nextBillingDate:0)[0],c=document.querySelector(t),m=document.querySelector(n),l=document.querySelector(a);if(o&&o.payment){if(c&&(c.textContent=`$${o.payment.amount}`),m){let s=g(o.payment.nextBillingDate);m.textContent=s}l&&(l.textContent=o.active?"Active":"Inactive")}else c&&(c.textContent="Free"),m&&(m.textContent="N/A")}var C=window.$memberstackDom;document.addEventListener("DOMContentLoaded",function(){C.getCurrentMember().then(({data:e})=>{e&&p(e)})});window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async e=>{let[t]=e;if(!t)return;let{listInstance:n}=t,[a]=n.items,r=a.element,i=await u();n.clearItems();let o=i.map(l=>M(l,r));await n.addItems(o);let c=t.form.querySelector('[data-element="filter"]');!c||!c.parentElement||c.remove()}]);var M=(e,t)=>{let n=t.cloneNode(!0),a=n.querySelector('[data-element="first-name"]'),r=n.querySelector('[data-element="last-name"]'),i=n.querySelector('[data-element="chapter"]'),o=n.querySelector('[data-element="company"]');return a&&(a.textContent=e.firstName),r&&(r.textContent=e.lastName),i&&(i.textContent="National Virtual",e.chapter&&(i.textContent=e.chapter)),o&&(e.company?o.textContent=e.company:o.style.display="none"),n};})();
